<div *ngIf="success">
    <div class="cv">
        <br /><span class="alert" i18n="@@passwordchanged">you have changed your password <br /></span>
        <a href="login"><button>login</button></a>
    </div>
</div>
<!-- TODO - Verificar 2 ngForm -->
<div *ngIf="!success">
    <form #f="ngForm" class="">
        <div [hidden]="selectedUser">
            <h3 i18n="@@typeusrnm">Type your username</h3>
            <label>
                <span i18n="@@usernamef">Username</span>:
                <br />
            </label>
            <br /><input type="text" name="name" [(ngModel)]="uName" required appUserExist ngControl="userName"
                placeholder="write the username" i18n-placeholder (change)="onSelect(uName)" />
            <div i18n="@@usernotexistf" class="alert" *ngIf="uName && !f.valid">
                Username does not exist!
            </div>
            <button [disabled]="f.invalid" (click)="onSelect(uName)" i18n="@@submitf">submit</button>
        </div>
        <div *ngIf="selectedUser">
            <h3>{{selectedUser.email}}</h3>
            <div *ngIf="!cAnsw">
                <form #f="ngForm">
                    <label>
                        <p i18n="@@recoveryquestf">Recovery Question:</p>
                    </label>
                    <p>
                        {{selectedUser.recoverphrase}}
                    </p>
                    <br />
                    <label>
                        <p i18n="@@recoveryansf">Recovery Answer:</p>
                    </label>
                    <input type="text" required [(ngModel)]="answ" placeholder="write the answer" i18n-placeholder
                        [ngModelOptions]="{standalone: true}" />
                    <button i18n="@@answf" (click)="checkAnswer(selectedUser.email, answ)">Answer</button>
                    <div i18n="@@ansnotcorrectf" class="alert" *ngIf="!iAnsw">
                        Answer is not correct
                    </div>
                </form>
            </div>
            <div *ngIf="cAnsw">
                <form #g="ngForm" class="">
                    <label>
                        <span i18n="@@newpassf">New Password</span>:
                        <br />
                    </label>
                    <br />
                    <input type="password" name="password" [(ngModel)]="selectedUser.password" required minlength="6"
                        placeholder="write the new password" i18n-placeholder />
                    <span *ngIf="g.invalid" class="alert" i18n=@@strongpassword1>passwords must have at least 6
                        characters</span><br />
                    <button type="submit" (click)="onSubmitUpdate(g)" i18n="@@submit">submit</button>
                </form>
            </div>
        </div>
        <div class="overall alert" [hidden]="errorAlert==false">
            <div class="cv">
                <span i18n="@@errormanagement">There was an error on processing your request <br /><br /></span>
                <span>{{error}}</span>
                <div class="icon"><a (click)="closeError()">
                        <img title="close" src="assets/svg/x.svg"></a>
                </div>
            </div>
        </div>
    </form>
</div>