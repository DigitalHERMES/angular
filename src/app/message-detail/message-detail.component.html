<div class="alert" i18n="nomessage" *ngIf="noMessage">Alert: cannot access this message<br/></div>
<div *ngIf="message" class=" messages">
    <h3><span *ngIf="message.secure"><img class="inlineicon" src="assets/svg/lock.svg"/></span>
        {{message.name}}</h3>

    <div class="formdata" *ngIf="message.secure && !uncrypted">
        <p i18n="@@encryptedmessage">Encrypted message, type the password:</p>
        <p class="alert" *ngIf="wrongPass" i18n="@@ewrongpassword">wrong password, please try again</p>
        <form #e="ngForm" id="secureform" novalidate>
            <input name="pass" type="password" ngModel required >
            <button type="submit" (click)="sendPassword(message.id,e)">submit</button>
        </form>

        
    </div>

    <!--
    <div class="blobber">
        <div class="tx">decoding message...</div>
        <div class="square"></div>
    </div>

    
-->
<div class="date">
    
</div>


    <div class="messagebody" *ngIf="!message.secure || uncrypted">
        <p>{{message.text}}</p>
        <hr>
        <div *ngIf="message.file" >
			
            
            <span i18n="@@File">File: </span>
            <a target="_new" href="{{url}}/file/{{message.fileid}}">
				{{message.file}}
				

                <div *ngIf="isImage">
                <img class="messageImg" src="{{url}}/file/{{message.fileid}}{{message.secure ? passString : ''}}" />
                </div>

                <div *ngIf="isAudio">
                    <audio controls class="messageAudio">
                        <source src="{{url}}/file/{{message.fileid}}{{message.secure ? passString : ''}}" type="{{message.mimetype}}"/>
                        your browser does not support this type of audio
                    </audio> 
                </div>

			</a>
            <hr>
            <!-- <a target="_new" href="{{url}}/file/{{message.fileid}}&pass='teste'" >  {{message.file}}</a>-->
		</div>

    </div>

<div *ngIf="!noMessage">
    
    <small><p class="msginf" i18n="@@Origin">Origin: {{message.orig}}</p>
    <p class="msginf" i18n="@@desnitation">Destination: {{message.dest}}</p>
    <p class="msgdate" i18n="@@sentat">Sent at: {{message.sent_at}}</p>
    <p class="msgid">Id: {{message.id}}</p></small>
</div>
<hr>

<div class="navicons">

    <div class="btn" >
        <a  routerLink="/compose" >
            <span  i18n="@@composea"><img title="help" src="assets/svg/edit.svg">compose</span>
        
        </a>

        <!--<a *ngIf="!noMessage" i18n="@@reply" routerLink="/compose" i18n="@@compose">
            <img title="help" src="assets/svg/reply-solid.svg">compose
        </a>-->
    </div>

    <div class="btn sent" >
        <a i18n="sent messages" routerLink="/sent" i18n="@@sent">
            <img title="help" src="assets/svg/cloud-upload-alt-solid.svg">sent messages
        </a>
    </div>
<!--
    <label>is encrypted
        <input type="checkbox" (change)="changeEnc()">
    </label>
-->



</div> 

</div>
