
<div class="formfield">
    <h2 i18n="@@admmanage">User Management</h2>

    

    <h3>Users</h3>

    <label >is admin: <input type="checkbox"  (change)="loggedin()" name="isadmin" checked>
    </label>
    
    <button i18n="@@createadm"><a routerLink="/users">create user</a></button>

    <!-- test zone
    <div>{{isadmin}}</div>
    <div>{{isadmin}}</div>

    <div [hidden]="isadmin&&!isEditing">teste1</div>
    <div [hidden]="isadmin||!isEditing">teste2</div>
    <div [hidden]="isadmin&&isEditing">teste3</div>
    <div [hidden]="!isadmin&&isEditing">teste4</div>
    <div [hidden]="!isadmin||isEditing">teste5</div>

<hr>
    <div [hidden]="isadmi==true&&isEditing==false">teste1</div>
    <div [hidden]="isadmin==true||isEditing==false">teste2</div>
    <div [hidden]="isadmin==true&&isEditing==true">teste3</div>
    <div [hidden]="isadmin==false&&isEditing==false">teste4</div>
    <div [hidden]="isadmin==false||isEditing==false">teste5</div>

    -->


    <ng-container *ngIf="users" >

        <input ng-model="search" [hidden]="isEditing==true||isadmin==false" />

        <ul id="userlist" ng-model="selectedUser" [hidden]="isEditing==true||isadmin==false">
            <li *ngFor="let user of users" (click)="onSelect(user)">{{user.name}} | {{user.location}}</li>
        </ul>
    </ng-container>
    <ng-container *ngIf="selectedUser">
                
        <form [hidden]="isEditing==false" #f="ngForm" id="userdata" class="formdata" (ngSubmit)="createUser(f)" novalidate>
            <label>
                <span i18n>ID</span>: {{selectedUser.id}}
                <br/>
            </label>
            <label for="name">
                <span i18n>name</span>:
                <br/><input name="name" [(ngModel)]="selectedUser.name" required #name="ngModel" placeholder="write the username" />
            </label>
            <label for="email">
                <span i18n>name</span>:
                <br/><input name="email" [(ngModel)]="selectedUser.email" required #name="ngModel" placeholder="write the username" />
            </label>
            <label>
                <span i18n>phone number</span>:
                <br/><input name="phone" [(ngModel)]="selectedUser.phone"  placeholder="phone number"  />
            </label>
            <label>
                <span i18n>site</span>:
                <br/><input name="site" [(ngModel)]="selectedUser.site" placeholder="website"  />
            </label>
            <label>
                <span i18n>location</span>:
                <br/><input name="location" [(ngModel)]="selectedUser.location"  placeholder="location"  />
            </label>
            <label>
                <span i18n>password</span>:
                <br/><input name="password"  [(ngModel)]="selectedUser.password" required  placeholder="password"   />
            </label>
            <label>
                <span i18n>recovery phrase</span>:
                <br/><input  name="recoverphrase" [(ngModel)]="selectedUser.recoverphrase" required placeholder="write a question to recover your password" />
            </label>
            <label>
                <span i18n>recovery answer</span>:
                <br/><input  name="recoveranswer" [(ngModel)]="selectedUser.recoveranswer" placeholder="answer to your recovery question"  />
            </label>
            

            <hr>
                <span i18n>created at</span>: <span> {{selectedUser.created_at}}</span>
                <span i18n>updated at</span>: <span> {{selectedUser.updated_at}}</span>
            <hr>

            <label >
                <span i18n>is admin</span>:
                <br/><input name="admin" class="ckbx" type="checkbox" [(ngModel)]="selectedUser.admin"  />
            </label>

            <span i18n="@@selectstation">station
            </span>:
            <ng-container *ngIf="stations">

                <select ng-model="selectedStation">
                    <option *ngFor="let station of stations">{{station.name}} | {{station.location}}</option>

                </select>
                </ng-container>

                <button type="submit" (click)="onSubmitDelete(f.value.id)">delete user</button>
                <button type="submit" (click)="onSubmitUpdate(f)">update user</button>
                <button type="submit" (click)="onSubmitUpdate(f)">update user</button>

        <input type="submit" class="sbmbtn">
        </form>
    </ng-container>

</div>

