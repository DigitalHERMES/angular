<div class="">
    <h2>Radio Configuration - Ubitx V6</h2>

    <div i18n="cannotaccessradio" class="alert" *ngIf="!radio">Alert: Cannot access radio<br/></div>
    <div >
    <!--<div>-->
        <form>
            <p><span i18n="@@currentradiofreq">VFO - Frequencia: </span>  {{radio.freq}} Hz {{mode}}</p> 
            <p><span>BFO (Beat Freq Osc):</span> {{radio.bfo}} </p>
            <p><span>FWD - Potência direta  : </span>{{radio.fwd}} </p>
            <p><span>REF - Potência refletida: </span>{{radio.ref}} </p>
            <p><span>Limiar da proteção refletida: </span>{{radio.refthreshold}} </p>
            <p><span>Mastercal: </span>{{radio.mastercal}}</p>
            <p><span>Serial: </span>{{radio.serial}} </p>
            <div *ngIf="led" i18n="@@radioledon">LED de status: on </div>
            <div *ngIf="!led" i18n="@@radioledoff">LED de status: off</div>
            <div *ngIf="protection" i18n="@@protectionon">protection: ON</div>
            <div *ngIf="protection" i18n="@@protectionoff">protection: off </div>
            <div *ngIf="bypass" i18n="@@bypasson">bypass: ON - ligado</div>
            <div *ngIf="!bypass" i18n="@@bypassoff">bypass: OFF - desligado</div>
            <div *ngIf="radio.tx" >Modo de operaçao: TX </div>
            <div *ngIf="radio.rx" >Modo de operaçao: RX </div>

            <div class="radio" >
                <br/>
                <form #fptt="ngForm" class="formdata field"   >
                    <p><span >PTT:</span></p>
                    <button class="midbt" type="submit" (click)="changePtt(fptt)" [disabled]="fptt.invalid" i18n="changeptt">change PTT</button>
                    <label><input class="inl" type="radio" name="ptt" [(ngModel)]="ptt" value="ON" [checked]="radio.tx=='true'" >ON - Ligado</label>
                    <label><input class="inl" type="radio" name="ptt" [(ngModel)]="ptt"  value="OFF" [checked]="radio.tx=='false'">OFF - Desligado</label>
                </form>

                <form #ftesttone="ngForm" class="formdata field"   >
                    <p><span >Tom de teste:</span></p>
                    <button class="midbt" type="submit" (click)="changePtt(ftesttone)"  i18n="changetone">change Tone</button>
                    <label><input class="inl" type="radio" name="testtone" [(ngModel)]="testtone" value="0" [checked]="testtone==0" >OFF - desligado</label>
                    <label><input class="inl" type="radio" name="testtone" [(ngModel)]="testtone"  value="600" [checked]="testtone==600">ON - 600 Hertz</label>
                    <label><input class="inl" type="radio" name="testtone" [(ngModel)]="testtone"  value="1500" [checked]="testtone==1500">ON - 1500 Hertz</label>
					<label>{{testtone}}</label>
                </form>

                <form #fbypass="ngForm" class="formdata field"   >
                    <p><span >ByPass:</span></p>
                    <button class="midbt" type="submit" (click)="changePtt(fbypass)" [disabled]="radio.bypass.invalid" i18n="changeptt">change ByPass</button>
                    <label><input class="inl" type="radio" name="bypass" [(ngModel)]="bypass" value="ON" [checked]="radio.bypass=='true'" >ON - Ligado</label>
                    <label><input class="inl" type="radio" name="bypass" [(ngModel)]="bypass"  value="OFF" [checked]="radio.bypass=='true'">OFF - Desligado</label>
                </form>

                <form #fmode="ngForm" class="formdata field" >
                    <p><span i18n="@@changeradiomode">Radio mode:</span></p>
                    <button class="midbt" type="submit" (click)="changeMode(fmode)" [disabled]="fmode.invalid" i18n="changemode">change mode</button>
                    <label><input class="inl" type="radio" name="mode" [(ngModel)]="mode" value="USB" [checked]="radio.mode=='USB'" >USB - Modulaçao em Banda Superior </label>
                    <label><input class="inl" type="radio" name="mode" [(ngModel)]="mode"  value="LSB" [checked]="radio.mode=='LSB'">LSB - Modulacao em Banda Inferior </label>
                </form>

                <form #ffreq="ngForm" class="formdata field"   >
				<p><span i18n="@@changefrequency">VFO - Radio frequency:</span></p>
                    <button class="midbt" (click)="changeFrequency(ffreq)" [disabled]="ffreq.invalid" i18n="@@changefreq">change frequency</button>
                    <input type="number" [min]="freqmin" [max]="freqmax" class="midbt" name="freq" [(ngModel)]="freq" value={{radio.freq}} (ngModelChange)="changeCallback(ffreq)">
                </form>

                <form #frefthreshold="ngForm" class="formdata field"   >
                    <p><span >Limiar de proteção:</span></p>
                    <button class="midbt" (click)="changeRefThreshold(frefthreshold)" [disabled]="frefthreshold.invalid" i18n="@@changeRefThreshold">change threshold</button>
                    <input type="number"  class="midbt" name="bypass" [(ngModel)]="bypass" value={{radio.refthreshold}} (ngModelChange)="changeRefThreshold(frefthreshold)">
					<span>TODO: REmove {{radio.refthreshold}} </span>
                </form>

            </div>

            <div class="radio" *ngIf="alterSet">
                <br/>
                <form #fbfo="ngForm" class="formdata field" novalidate  >
                    <p><span i18n="@@bfobeatfreq">BFO beat frequency oscillator:</span> </p>
                    <input class="midbt" name="bfo" value={{radio.bfo}} [(ngModel)]="bfo" >
                    <button class="midbt" type="submit" (click)="changeBfo(fbfo)" [disabled]="fbfo.invalid" i18n="changefreq">change bfo</button>
                </form>

                <form #fmaster="ngForm" class="formdata field" novalidate>
                    <p><span i18n="@@mastercall">mastercal:</span> </p>
                    <input class="midbt" name="mastercal" [(ngModel)]="mastercal" value={{radio.mastercal}}>
                    <button class="midbt" type="submit" (click)="changeMasterCall(fmaster)" [disabled]="fmaster.invalid" i18n="changefreq">change mastercall</button>
                </form>

            </div>

            <hr>
            <button i18n="@@resettodefault" (click)="confirmReset()">reset to default</button>
            <button click="resetProtection()">Reset Protection</button>
        
            <div class="overall alert" *ngIf="errorAlert==true">
                <div class="cv" >
                    <span i18n="@@errorsending">There was an error on changing configuration <br/><br/></span>
                    <span>{{error}}</span>
                    <div class="icon" ><a (click)="closeError()" >
                        <img title="compose" src="assets/svg/x.svg"></a>
                    </div>
    
                </div>
            </div>

            <div class="overall alert" *ngIf="!reseting==false">
                <div class="cv" >
                    <span i18n="@@confirmreset"> Are you sure you want to reset the radio to the default configuration?
                        <br/>
                        <br/>
                    </span>
                    
                    <span class="icon" ><a (click)="confirmReset()" >
                        <button i18n="@@cancelr">cancel</button></a>
                    </span>
                    <span class="icon" ><a (click)="resetRadio()" >
                        <button i18n="@@reset1">reset</button></a>
                    </span>
                </div>
            </div>

        </form>
    </div>
</div>
