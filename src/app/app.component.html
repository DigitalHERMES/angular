<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * Delete the template below * * * * * * * * * * -->
<!-- * * * * * * * to get started with your project! * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->

<style>
  :host {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    box-sizing: border-box;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 8px 0;
  }

  p {
    margin: 0;
  }

  /* Responsive Styles */
  @media screen and (max-width: 767px) {

  }

  @media screen and (max-width: 575px) {

  }
</style>

<!--<app-hmheader>
</app-hmheader>-->

<header>
  <a routerLink='/messages' class="logo"><img title="Hermes logo" src="assets/img/logohermes.png"></a>

  <h1 class="sitetitle" *ngIf="system"><span >{{system.domain}}</span></h1>
</header>

<div class="userstatus" >

  <!-- TODO ERROR else: <div class="logged" *ngIf="currentUser; else isLoggedOut"> -->

    <div class="logged" *ngIf="currentUser; else loggedOut">
      <div class="navbar-nav">
       <!-- <span>{{currentUser.email}}</span>
          <span *ngIf="currentUser.admin === true" i18n="@@isadministrator"> is administrator</span><br/> -->
        <div class="servericon">
          <span class="icon" *ngIf="!system" i18n="@@serveroff1">
            server off
          </span>
        </div>

       <!--<span class="servericon">
          <span class="icon" *ngIf="system">
            <img title="server status ON! PID uucp: {{system.piduu}} / ar: {{system.pidar}}" src="assets/svg/broadcast-tower.svg" >
          </span>
          <span class="icon" *ngIf="!system">
          <img title="server status off" src="assets/svg/broadcast-tower-off.svg" >
          </span>
        </span>--> 

        <a class="icon" routerLink="/login" *ngIf="!currentUser" >
          <img title="Log In" src="assets/svg/sign-in-alt-solid.svg" >
        </a>

        <a class="icon" (click)="logout()" *ngIf="currentUser">
          <img title="logged as {{currentUser.email}} /  {{currentUser.admin}}  -> click to logout" src="assets/svg/sign-out-alt-solid.svg" >
        </a>
        <br>

          <!--<a class="nav-item nav-link" routerLink="/" routerLinkActive="active">Home</a>-->
          <!--<span *ngIf="currentUser.res === ok">ok</span><br/>
          <button *ngIf="currentUser.email" (click)="logout()">logout</button>
          <button *ngIf="!currentUser.email" routerLink="/login">login</button>-->
      </div>
    </div>

    <ng-template #loggedOut>
      <span class="servericon">
        <!--<span class="icon" *ngIf="system">
          <img title="server status ON! PID uucp: {{system.piduu}} / ar: {{system.pidar}}" src="assets/svg/broadcast-tower.svg" >
        </span>
        <span class="icon" *ngIf="!system">
        <img title="server status off" src="assets/svg/broadcast-tower-off.svg" >
        </span>-->
      </span>

      <a class="icon" routerLink="/login" >
        <img title="Log In" src="assets/svg/sign-in-alt-solid.svg" >
      </a>
    </ng-template>

</div>
<nav id="mainnav" *ngIf="system">
  <a routerLink="/messages" i18n="@@messages"><img title="messages" src="assets/svg/comment.svg">messages</a>
  <a routerLink="/admin" i18n="@admin" >
    <img title="admin" src="assets/svg/tools.svg">admin
  </a>
  <a routerLink="/email" i18n="@@email"><img title="mail" src="assets/svg/envelope.svg">email</a>
  <a routerLink="/languages" i18n="@@languages"><img title="languages" src="assets/svg/globe-americas.svg">language</a>
  <a routerLink="/help" i18n="@@help"><img title="help" src="assets/svg/question-circle-regular.svg">help</a>

</nav>

<div class="formfield">

<router-outlet *ngIf="system; else serverOff"></router-outlet>

<ng-template #serverOff >
  <hr>
  <p i18n="hermesoffline">Hermes server is offline, please turn the station on.</p>
<br>
<div class="alert" *ngIf="!serverError" (click)="showServerAlert()" i18n="@@areadyon">If your server is already on click here</div>

<div *ngIf="serverError" i18n="@@areadyonmsg">
  If you are seeing a "server offline" message, yet your server should, or seems to be on, it's possible that your system is corrupted. If you already tried to access HERMES from other devices and the problem persists, you may need to take your station to a place with internet and contact the vendors at support@hermes.radio to schedule an online maintenance support session.
<br>
<span class="icon"><img (click)="showServerAlert()"  title="close" src="assets/svg/times.svg"> </span>
</div>


</ng-template>

</div>


<div class="footer">
  <ng-container *ngIf="system">
  <span >
    <span i18n="stationa">Station:</span> {{system.name}}  
   
    <span *ngIf="currentUser">
    <span *ngIf="currentUser.admin === true" i18n="@@isadministrator"> is administrator</span></span>
  
    <span *ngIf="!system" >
      &#124;  <span i18n="@@serveroff0">server off</span>
    </span>
    | <span i18n="@@statusa0">Status: </span>
    <div *ngIf="!system.status" class="redcircle" (click)="showFullStatus()"> </div>
    <div *ngIf="system.status" class="greencircle"> </div>
    
    
    <!--<div [ngClass]="{'redcircle' : !system.status , 'greencircle' : system.status }" title='system status'></div>-->
    </span>
    <span *ngIf="currentUser"> | <span i18n="@@usera">user:</span> {{currentUser.email}}</span>
    
    <div *ngIf="fullStats">
      
    &#124; UU: <div [ngClass]="{'redcircle' : !system.piduucp , 'greencircle' : system.piduucp }" title='uuardop {{system.piduucp}}'></div>
    &#124; DB: <div [ngClass]="{'redcircle' : !system.piddb , 'greencircle' : system.piddb }" title='mysql {{system.piddb}}'></div>
    &#124; AR: <div [ngClass]="{'redcircle' : !system.pidmodem , 'greencircle' : system.pidmodem }"></div>
    &#124; IRM: <div [ngClass]="{'redcircle' : !system.pidirm , 'greencircle' : system.pidirm }"></div>
    &#124; PF: <div [ngClass]="{'redcircle' : !system.pidpf , 'greencircle' : system.pidpf }"></div>
  </div>
    
    <!--user: {{currentUser.email}} / {{currentUser.admin}}-->
  
</ng-container>

  <span *ngIf="!system" i18n="@@stationoffline">
     Hermes station offline <figure class="redcircle"></figure>
  </span>

</div>
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->

